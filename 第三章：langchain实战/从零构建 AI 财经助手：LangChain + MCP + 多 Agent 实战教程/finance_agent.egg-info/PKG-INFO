Metadata-Version: 2.4
Name: finance-agent
Version: 0.1.0
Summary: Add your description here
Requires-Python: >=3.13
Description-Content-Type: text/markdown
Requires-Dist: duckduckgo-search>=8.1.1
Requires-Dist: fastapi>=0.129.0
Requires-Dist: langchain>=1.2.10
Requires-Dist: langchain-openai>=1.1.9
Requires-Dist: langgraph>=1.0.8
Requires-Dist: mcp>=1.26.0
Requires-Dist: sse-starlette>=3.2.0
Requires-Dist: uvicorn>=0.40.0
Requires-Dist: yfinance>=1.1.0

# Finance Agent - è´¢ç»åˆ†ææ™ºèƒ½ä½“

> åŸºäº LangChain + LangGraph æ„å»ºçš„è´¢ç»åˆ†æ AI Agentï¼Œç”¨äºæ•™å­¦æ¼”ç¤ºå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“åº”ç”¨ã€ä½¿ç”¨ MCP åè®®å’Œå®ç°å¤š Agent åä½œã€‚

## é¡¹ç›®ç®€ä»‹

Finance Agent æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è´¢ç»åˆ†ææ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå±•ç¤ºäº†ç°ä»£ AI Agent å¼€å‘çš„æ ¸å¿ƒæŠ€æœ¯ï¼š

- ğŸ¤– **LangChain Agent å¼€å‘** - ä½¿ç”¨ LangChain æ¡†æ¶æ„å»ºå·¥å…·è°ƒç”¨å‹ Agent
- ğŸ”„ **LangGraph å·¥ä½œæµ** - ä½¿ç”¨ LangGraph æ„å»ºå¤æ‚çš„ Agent å·¥ä½œæµå’ŒçŠ¶æ€ç®¡ç†
- ğŸ“¡ **MCP åè®®é›†æˆ** - å®ç° Model Context Protocolï¼Œè®©å·¥å…·å¯è¢«å…¶ä»–åº”ç”¨ä½¿ç”¨
- ğŸ¤ **å¤š Agent åä½œ** - æ¼”ç¤ºå¤šä¸ªä¸“ä¸š Agent å¦‚ä½•ååŒå·¥ä½œ
- ğŸŒ **Web ç•Œé¢** - æä¾› FastAPI åç«¯å’Œå‰ç«¯ç•Œé¢ï¼Œæ–¹ä¾¿äº¤äº’ä½¿ç”¨

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- âœ… è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢ï¼ˆå®æ—¶ä»·æ ¼ã€å¸‚å€¼ã€å¸‚ç›ˆç‡ç­‰ï¼‰
- âœ… å†å²æ•°æ®åˆ†æï¼ˆä»·æ ¼èµ°åŠ¿ã€æˆäº¤é‡ï¼‰
- âœ… è´¢åŠ¡æŠ¥è¡¨æŸ¥è¯¢ï¼ˆåˆ©æ¶¦è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨ã€ç°é‡‘æµé‡è¡¨ï¼‰
- âœ… åˆ†æå¸ˆè¯„çº§å’Œæ¨è
- âœ… è´¢ç»æ–°é—»æœç´¢
- âœ… å¤šè‚¡ç¥¨å¯¹æ¯”åˆ†æ

### æŠ€æœ¯ç‰¹æ€§

- ğŸ”§ åŸºäºæ™ºè°± GLM-4-Flash æ¨¡å‹
- ğŸ› ï¸ 8 ä¸ªä¸“ä¸šè´¢ç»å·¥å…·
- ğŸ’¡ ReAct Agent æ¨ç†æ¨¡å¼
- ğŸŒŠ æµå¼è¾“å‡ºæ”¯æŒ
- ğŸ¯ ä¸­æ–‡ä¼˜åŒ–

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Python 3.13+
- UV åŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰æˆ– pip

### 2. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

### 3. é…ç½® API Key

ç¼–è¾‘ `finance_agent.py` ä¸­çš„ API Key é…ç½®ï¼š

```python
ZHIPU_API_KEY = "your-api-key-here"
```

### 4. è¿è¡Œæ–¹å¼

#### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# ä½¿ç”¨ uv
uv run python finance_agent.py

# æˆ–ç›´æ¥è¿è¡Œ
python finance_agent.py
```

#### Web æ¨¡å¼

```bash
# å¯åŠ¨ Web æœåŠ¡
uv run python api/server.py

# è®¿é—® http://localhost:8000
```

## é¡¹ç›®ç»“æ„

```
finance-agent/
â”œâ”€â”€ finance_agent.py      # æ ¸å¿ƒ Agent å®ç°
â”œâ”€â”€ main.py               # å…¥å£æ–‡ä»¶
â”œâ”€â”€ api/                  # Web API
â”‚   â””â”€â”€ server.py         # FastAPI æœåŠ¡å™¨
â”œâ”€â”€ agents/               # å¤š Agent ç¤ºä¾‹
â”‚   â”œâ”€â”€ mcp_server.py     # MCP Server å®ç°
â”‚   â”œâ”€â”€ research_agent.py # ç ”ç©¶ Agent
â”‚   â”œâ”€â”€ analysis_agent.py # åˆ†æ Agent
â”‚   â””â”€â”€ multi_agent_system.py  # å¤š Agent åè°ƒå™¨
â”œâ”€â”€ static/               # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ app.js
â”œâ”€â”€ docs/                 # æ•™å­¦æ–‡æ¡£
â”‚   â”œâ”€â”€ langchain-guide.md      # LangChain æ•™ç¨‹
â”‚   â”œâ”€â”€ mcp-guide.md            # MCP ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ multi-agent-guide.md   # å¤š Agent åä½œæ•™ç¨‹
â””â”€â”€ examples/             # ä»£ç ç¤ºä¾‹
```

## æ•™å­¦å†…å®¹

æœ¬é¡¹ç›®ä¸“ä¸ºæ•™å­¦è®¾è®¡ï¼ŒåŒ…å«ä»¥ä¸‹å­¦ä¹ ææ–™ï¼š

### 1. LangChain Agent å¼€å‘

æŸ¥çœ‹ [docs/langchain-guide.md](docs/langchain-guide.md) å­¦ä¹ ï¼š
- å¦‚ä½•å®šä¹‰å·¥å…·ï¼ˆ@tool è£…é¥°å™¨ï¼‰
- å¦‚ä½•åˆ›å»º ReAct Agent
- å¦‚ä½•å¤„ç†æµå¼è¾“å‡º
- æç¤ºè¯å·¥ç¨‹æœ€ä½³å®è·µ

### 2. MCP åè®®ä½¿ç”¨

æŸ¥çœ‹ [docs/mcp-guide.md](docs/mcp-guide.md) å­¦ä¹ ï¼š
- MCP åè®®åŸºç¡€
- å¦‚ä½•å®ç° MCP Server
- å¦‚ä½•åœ¨ Claude Desktop ä¸­ä½¿ç”¨
- å·¥å…·å°è£…å’Œæš´éœ²

### 3. å¤š Agent åä½œ

æŸ¥çœ‹ [docs/multi-agent-guide.md](docs/multi-agent-guide.md) å­¦ä¹ ï¼š
- å¤š Agent æ¶æ„è®¾è®¡
- ä½¿ç”¨ LangGraph åè°ƒå¤šä¸ª Agent
- Agent é—´æ¶ˆæ¯ä¼ é€’
- å¤æ‚å·¥ä½œæµç¼–æ’

## ä½¿ç”¨ç¤ºä¾‹

### å‘½ä»¤è¡Œäº¤äº’

```bash
$ python finance_agent.py

ğŸ“Š è¯·è¾“å…¥é—®é¢˜: å¸®æˆ‘åˆ†æä¸€ä¸‹è‹¹æœå…¬å¸ï¼ˆAAPLï¼‰çš„æŠ•èµ„ä»·å€¼

  [è°ƒç”¨å·¥å…·] get_stock_info({"ticker": "AAPL"})
  [è°ƒç”¨å·¥å…·] get_recommendations({"ticker": "AAPL"})
  [è°ƒç”¨å·¥å…·] get_stock_news({"ticker": "AAPL"})

æ ¹æ®åˆ†æç»“æœ...
```

### Python ä»£ç è°ƒç”¨

```python
from finance_agent import agent
from langchain_core.messages import HumanMessage

# åŒæ­¥è°ƒç”¨
result = agent.invoke({
    "messages": [HumanMessage(content="AAPL å’Œ MSFT å“ªä¸ªæ›´å€¼å¾—æŠ•èµ„ï¼Ÿ")]
})
print(result["messages"][-1].content)

# æµå¼è°ƒç”¨
for msg, metadata in agent.stream(
    {"messages": [HumanMessage(content="åˆ†æç‰¹æ–¯æ‹‰çš„è´¢åŠ¡çŠ¶å†µ")]},
    stream_mode="messages"
):
    if hasattr(msg, "content") and msg.content:
        print(msg.content, end="", flush=True)
```

### Web API è°ƒç”¨

```bash
# éæµå¼
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "æŸ¥è¯¢ AAPL è‚¡ä»·"}'

# æµå¼ï¼ˆSSEï¼‰
curl -N http://localhost:8000/api/stream \
  -H "Content-Type: application/json" \
  -d '{"message": "åˆ†æè´µå·èŒ…å°"}'
```

## å·¥å…·åˆ—è¡¨

| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ | ç¤ºä¾‹ç”¨æ³• |
|---------|---------|---------|
| `get_stock_info` | è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ | get_stock_info("AAPL") |
| `get_stock_history` | è·å–å†å²ä»·æ ¼æ•°æ® | get_stock_history("AAPL", "1mo") |
| `get_financial_statement` | è·å–è´¢åŠ¡æŠ¥è¡¨ | get_financial_statement("AAPL", "income") |
| `get_stock_news` | è·å–è‚¡ç¥¨æ–°é—» | get_stock_news("AAPL") |
| `get_recommendations` | è·å–åˆ†æå¸ˆè¯„çº§ | get_recommendations("AAPL") |
| `compare_stocks` | å¯¹æ¯”å¤šåªè‚¡ç¥¨ | compare_stocks("AAPL,MSFT,GOOGL") |
| `search_financial_news` | æœç´¢è´¢ç»æ–°é—» | search_financial_news("ç¾è”å‚¨åŠ æ¯") |
| `think` | Agent æ€è€ƒåæ€ | think("éœ€è¦æ›´å¤šæ•°æ®...") |

## æŠ€æœ¯æ ˆ

- **LLM**: æ™ºè°± GLM-4-Flashï¼ˆå…¼å®¹ OpenAI APIï¼‰
- **Agent æ¡†æ¶**: LangChain + LangGraph
- **Web æ¡†æ¶**: FastAPI + Uvicorn
- **æ•°æ®æº**: yfinance (Yahoo Finance)
- **æœç´¢**: DuckDuckGo Search
- **åè®®**: MCP (Model Context Protocol)

## å¼€å‘è·¯çº¿å›¾

- [x] æ ¸å¿ƒ Agent åŠŸèƒ½
- [x] å‘½ä»¤è¡Œç•Œé¢
- [ ] Web API æœåŠ¡
- [ ] å‰ç«¯ç•Œé¢
- [ ] MCP Server å®ç°
- [ ] å¤š Agent åä½œç¤ºä¾‹
- [ ] å®Œæ•´æ•™å­¦æ–‡æ¡£
- [ ] Docker éƒ¨ç½²æ”¯æŒ
- [ ] å•å…ƒæµ‹è¯•

## å¸¸è§é—®é¢˜

### Q: æ”¯æŒå“ªäº›è‚¡ç¥¨å¸‚åœºï¼Ÿ

A: æ”¯æŒå…¨çƒä¸»è¦å¸‚åœºï¼ŒåŒ…æ‹¬ï¼š
- ç¾è‚¡: AAPL, MSFT, GOOGL ç­‰
- Aè‚¡: 600519.SSï¼ˆè´µå·èŒ…å°ï¼‰, 000001.SZï¼ˆå¹³å®‰é“¶è¡Œï¼‰ç­‰
- æ¸¯è‚¡: 0700.HKï¼ˆè…¾è®¯ï¼‰ç­‰

### Q: å¦‚ä½•åˆ‡æ¢åˆ°å…¶ä»– LLMï¼Ÿ

A: ä¿®æ”¹ `finance_agent.py` ä¸­çš„ `llm` é…ç½®ï¼š

```python
from langchain_openai import ChatOpenAI

llm = ChatOpenAI(
    model="gpt-4",  # æ”¹ä¸ºå…¶ä»–æ¨¡å‹
    openai_api_key="your-key",
    openai_api_base="https://api.openai.com/v1",
)
```

### Q: MCP Server å¦‚ä½•ä½¿ç”¨ï¼Ÿ

A: å‚è€ƒ [docs/mcp-guide.md](docs/mcp-guide.md) çš„è¯¦ç»†è¯´æ˜ã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub](https://github.com/yourusername/finance-agent)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/yourusername/finance-agent/issues)

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚æŠ•èµ„æœ‰é£é™©ï¼Œå†³ç­–éœ€è°¨æ…ã€‚
